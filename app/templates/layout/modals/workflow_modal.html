<!-- app/templates/layout/modals/workflow_modal.html -->
{# Workflow Modal - Implemented with Tailwind and Vanilla JS #}
{% import "layout/components/ui_helpers.html" as ui %}
{% call ui.modal_shell('workflowModal', labelledby='workflowModalTitle', overlay_id='workflowModalOverlay', panel_id='workflowModalPanel', size='md', panel_classes='max-h-[90vh] flex flex-col') %}
    <div class="modal-header">
        <h3 id="workflowModalTitle" class="modal-title">
            {{ _('Run Workflow') }}
        </h3>
        <button type="button" id="workflowModalCloseButtonHeader"
                class="ui-btn ui-btn--muted px-2 py-2 rounded-full"
                aria-label="Close modal">
            <i class="material-icons">close</i>
        </button>
    </div>
    <div class="modal-body space-y-6 overflow-y-auto">
        <div>
            <p class="text-sm text-text-muted">{{ _('Apply AI analysis to the selected transcript using the workflow prompt below.') }}</p>
            <p class="text-sm text-text-muted mt-2">
                {{ _('You can manage your workflows') }} <a href="{{ url_for('main.manage_prompts') }}" class="text-primary hover:underline">{{ _('here') }}</a>.
            </p>
        </div>
        <div>
            <label for="workflowPromptSelect" class="form-label">{{ _('Saved Workflows') }}</label>
            <div class="mt-1">
                <select id="workflowPromptSelect"
                        class="input-select">
                    <option value="" selected>{{ _('Select a Workflow or Enter a Custom Prompt Below') }}</option>
                </select>
            </div>
        </div>
        <div>
            <label for="workflowPromptInput" class="form-label">{{ _('Custom Workflow Prompt') }}</label>
            <textarea id="workflowPromptInput" rows="4"
                      class="input-textarea"
                      placeholder="{{ _('Enter your custom workflow prompt here (max 120 words)...') }}"></textarea>
            <p id="workflowPromptWordCount" class="mt-1 text-xs text-text-muted text-right">0/120 {{ _('words') }}</p>
        </div>
        <input type="hidden" id="workflowTranscriptionId">
        <input type="hidden" id="workflowOperationId">
    </div>
    <div class="modal-footer">
        {{ ui.button(_('Cancel'), variant='muted', id='workflowModalCloseButtonFooter') }}
        {{ ui.button(_('Submit Workflow'), variant='primary', type='button', icon='send', icon_position='end', id='submitWorkflowBtn', attrs='disabled') }}
    </div>
{% endcall %}
