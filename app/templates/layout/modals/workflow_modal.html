<!-- app/templates/layout/modals/workflow_modal.html -->
{# Workflow Modal - Implemented with Tailwind and Vanilla JS #}
<div id="workflowModal"
     class="fixed inset-0 z-50 flex items-center justify-center p-4 hidden transition-opacity duration-300 ease-in-out opacity-0"
     role="dialog" aria-modal="true" aria-labelledby="workflowModalTitle" aria-hidden="true">
    <div id="workflowModalOverlay" class="fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity duration-300 ease-in-out opacity-0"></div>
    <div id="workflowModalPanel"
         class="relative bg-white rounded-lg shadow-xl transform transition-all sm:max-w-lg sm:w-full
                max-h-[90vh] flex flex-col
                opacity-0 scale-95 duration-300 ease-out">
        <div class="flex items-start justify-between p-4 border-b border-gray-200 rounded-t">
            <h3 id="workflowModalTitle" class="text-xl font-semibold text-gray-900">
                {{ _('Run Workflow') }}
            </h3>
            <button type="button" id="workflowModalCloseButtonHeader"
                    class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center"
                    aria-label="Close modal">
                <i class="material-icons">close</i>
            </button>
        </div>
        <div class="p-6 space-y-6 overflow-y-auto">
            <div>
                <p class="text-sm text-gray-600">{{ _('Apply AI analysis to the selected transcript using the workflow prompt below.') }}</p>
                <p class="text-sm text-gray-600 mt-2">
                    {{ _('You can manage your workflows') }} <a href="{{ url_for('main.manage_prompts') }}" class="text-primary hover:underline">{{ _('here') }}</a>.
                </p>
            </div>
            <div>
                <select id="workflowPromptSelect"
                        class="form-select block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm">
                    <option value="" selected>{{ _('Select a Workflow or Enter a Custom Prompt Below') }}</option>
                </select>
            </div>
            <div>
                <label for="workflowPromptInput" class="block text-sm font-medium text-gray-700">{{ _('Custom Workflow Prompt') }}</label>
                <textarea id="workflowPromptInput" rows="4"
                          class="form-textarea mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm"
                          placeholder="{{ _('Enter your custom workflow prompt here (max 120 words)...') }}"></textarea>
                <p id="workflowPromptWordCount" class="mt-1 text-xs text-gray-500 text-right">0/120 {{ _('words') }}</p>
            </div>
            <input type="hidden" id="workflowTranscriptionId">
            <input type="hidden" id="workflowOperationId">
        </div>
        <div class="flex items-center justify-end p-4 space-x-2 border-t border-gray-200 rounded-b">
             <button type="button" id="workflowModalCloseButtonFooter"
                    class="text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10">
                {{ _('Cancel') }}
            </button>
            <button class="inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed"
                    type="button" id="submitWorkflowBtn" disabled>
                {{ _('Submit Workflow') }} <i class="material-icons text-base ml-2">send</i>
            </button>
        </div>
    </div>
</div>
